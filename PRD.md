## **InsightFlow AI 项目需求文档 (PRD)**

### **1. 项目概述**

*   **项目名称：** InsightFlow AI (洞见流AI)
*   **产品定位：** 一个结合个人知识管理（PKM）、AI赋能与未来协作潜力的创新内容创作/学习平台。
*   **愿景：** 赋能用户高效捕捉、组织、连接、理解和创造知识，将零散信息转化为结构化洞见，并以AI为助手，提升学习、研究与创作效率。
*   **目标用户：** 学生、研究人员、内容创作者、终身学习者、知识工作者、希望提高个人生产力的专业人士。
*   **核心价值主张：**
    *   **知识自动化：** 利用AI自动整理、总结、分析知识。
    *   **深度理解：** 通过AI问答深入理解个人知识库。
    *   **高效创作：** AI辅助写作、润色和内容生成。
    *   **跨平台整合：** 统一管理多种格式的知识资产。

### **2. 产品目标与阶段规划**

**总目标：** 在10个月内构建一个从个人知识管理到AI辅助创作的闭环平台，并为未来的团队协作和更高级AI Agent功能奠定基础。

**阶段目标：**

*   **MVP (Phase 1, 0-4个月)：基础功能与AI文本辅助**
    *   实现核心笔记管理（CRUD）。
    *   提供基础AI文本辅助功能（润色、扩写、总结）。
    *   确保Web端基础体验流畅。
*   **Phase 2 (5-7个月)：智能问答与RAG实践**
    *   实现基于个人知识库的智能问答（RAG）。
    *   支持多格式文档导入与解析。
    *   优化搜索体验。
    *   成功进行云端部署。
*   **Phase 3 (8-10个月)：AI Agents与高级能力**
    *   引入AI Agents，实现更复杂自动化任务。
    *   提升内容分析、策展能力。
    *   为潜在的多用户协作功能预留接口和设计考量。
    *   关注系统健壮性、监控与日志。

### **3. 功能需求**

#### **3.1 MVP (Phase 1) 功能详情**

**A. 用户管理 (User Management)**

*   **注册与登录：**
    *   支持邮箱/手机号注册。
    *   支持邮箱/密码登录。
    *   支持密码找回功能。
*   **个人资料管理：**
    *   设置用户名、头像、简介。
    *   修改密码。

**B. 核心笔记/内容管理 (Note/Content Management)**

*   **创建/编辑/删除笔记：**
    *   支持富文本编辑（Markdown & WYSIWYG混合模式）。
    *   支持标题、正文、标签、分类。
*   **笔记列表与搜索：**
    *   展示所有笔记列表（可按创建日期、修改日期排序）。
    *   支持关键词全文搜索（初期可基于数据库模糊匹配）。
    *   支持按标签、分类筛选。
*   **标签与分类管理：**
    *   创建、编辑、删除标签。
    *   创建、编辑、删除分类。
    *   笔记与标签/分类关联。

**C. AI 文本辅助 (AI Text Assistance)**

*   **文字润色（在编辑区）：**
    *   用户选中一段文字，点击“AI润色”按钮。
    *   AI对选中文字进行语法纠正、表达优化、语境匹配（如：更正式、更口语化）。
    *   结果在侧边栏或弹窗显示，用户可选择替换或放弃。
*   **短内容扩写/续写（在编辑区）：**
    *   用户输入少量内容，点击“AI续写”按钮。
    *   AI基于输入内容生成后续文本（若干选项）。
    *   用户可选择插入。
*   **内容总结（针对整篇笔记）：**
    *   针对当前笔记内容，点击“AI总结”。
    *   AI生成短摘要，提炼核心要点。
    *   结果显示在侧边栏，用户可保存为新笔记或添加到原笔记中。

#### **3.2 Phase 2 (功能增强) 功能详情**

**A. 智能问答 (Intelligent Q&A) - 基于RAG**

*   **私人知识库导入：**
    *   支持上传多种格式文档：PDF、TXT、Markdown、DOCX/PPTX（解析文本内容）。
    *   后台**自动解析文档内容、分段、生成向量嵌入**。
    *   将向量存储到向量数据库。
*   **问答交互界面：**
    *   用户输入问题，系统从向量数据库检索相关文档片段。
    *   将检索到的片段和用户问题一并提交给LLM，生成回答。
    *   支持多轮对话上下文。
    *   **引用溯源：** 显示回答内容来源于哪个文档的哪个段落。

**B. 高级搜索与内容管理优化**

*   **语义搜索：** 不仅通过关键词，还能通过语义相关性进行搜索（结合向量检索）。
*   **内容预览：** 笔记列表支持悬停预览或快速展开内容。
*   **版本历史：** 笔记自动保存版本，支持回溯。

#### **3.3 Phase 3 (AI深度融合与管理扩展) 功能详情**

**A. 智能内容策展与分析 (Intelligent Content Curation & Analysis)**

*   **AI 自动分类/标签：**
    *   导入或创建新笔记时，AI自动分析内容，推荐相关标签或分类。
    *   支持用户确认或修改。
*   **洞察提取：**
    *   对特定文档或整个知识库执行洞察提取。
    *   AI识别并高亮显示关键人物、地点、事件、论点、相互关联的概念。
    *   生成知识图谱（可视化展示），显示概念间的链接。

**B. AI 协作者 (AI Assistants/Agents)**

*   **研究代理：**
    *   **指定研究主题：** 用户输入一个研究主题或问题。
    *   **外部信息检索：** AI Agent内部调用外部搜索工具（如Google Search API，需接入），收集相关网页内容。
    *   **内容总结与整合：** AI Agent对检索到的信息进行多源整合、去重、总结，生成结构化的研究报告。
    *   **报告导出：** 支持生成PDF/Markdown格式的研究报告。
*   **写作代理：**
    *   基于用户提供的大纲、关键词或短句，AI Agent生成完整文章草稿。
    *   支持指定文章风格（正式、幽默、技术报告等）。
    *   支持用户指令进行修订、扩展、缩减。
*   **任务代理 (可选，基于笔记内容)：**
    *   AI解析笔记内容，识别潜在的待办事项。
    *   将识别出的任务添加到待办列表，并支持用户设置提醒。

**C. 系统健壮性与可扩展性**

*   **监控与日志：**
    *   系统运行时性能监控（CPU、内存、网络IO、API调用响应时间等）。
    *   详细日志记录，支持按级别查看和检索（错误日志、操作日志、AI调用日志）。
*   **API 限流与配额管理：** 对大模型API调用进行限流，防止滥用和意外高成本。
*   **多用户协作基础 (未来扩展点，Phase 3开始考虑设计)：**
    *   初步考虑数据模型和权限设计，为未来支持多用户共享笔记、共同编辑等功能做准备。

### **4. 非功能需求**

*   **性能：**
    *   页面加载时间：主要页面不超过3秒。
    *   API响应时间：非AI核心接口<200ms，AI调用接口<5秒。
    *   文本处理速度：AI润色/总结/扩写在10秒内完成；文档向量化根据文档大小决定，但需有进度指示。
*   **安全性：**
    *   用户认证与授权：JWT认证、数据传输加密（HTTPS）。
    *   数据隐私：用户笔记和私有文档数据加密存储，AI调用不泄露敏感信息。
    *   防SQL注入、XSS等常见Web安全漏洞。
*   **可扩展性：**
    *   微服务架构（尤其对于后端未来可拆分）。
    *   服务容器化（Docker）。
    *   支持负载均衡。
*   **可用性：**
    *   99.5%（MVP） - 99.9%（Phase 3）以上在线时间。
    *   健壮的错误处理和用户提示。
*   **用户体验 (UX)：**
    *   简洁直观的用户界面。
    *   流畅的交互体验。
    *   响应式设计，支持PC/平板/移动端基本浏览。
*   **可维护性：**
    *   良好代码结构和注释。
    *   自动化测试。
    *   详尽的部署和运维文档。
*   **成本：**
    *   AI API调用成本优化（通过Prompt工程、模型选择、缓存等）。
    *   云服务资源按需伸缩，避免资源浪费。

### **5. 技术选型 (建议)**

*   **前端：** React (Next.js) / Vue (Nuxt.js) + TypeScript
*   **后端：** Node.js (NestJS) + TypeScript
*   **数据库：** PostgreSQL (支持PGVector) + Redis
*   **向量数据库：** ChromaDB (自托管) 或 PGVector (直接用PostgreSQL)
*   **AI 接口：** OpenAI API (主流LLMs, Embeddings)，LangChain.js / LlamaIndex.js (AI Agent框架)
*   **数据存储：** 文件系统 / MinIO / 云存储 (S3兼容)
*   **容器化：** Docker, Docker Compose
*   **部署：** 云服务器 (如：阿里云ECS, Tencent Cloud CVM) + CI/CD (GitHub Actions)
*   **监控：** Prometheus + Grafana / 云厂商自带监控

### **6. 未来展望 (Roadmap Beyond 10 Months)**

*   **多用户协作与团队空间：**
    *   共享笔记、共享知识库、团队协作审批流。
    *   权限管理与角色分配。
*   **更多模态支持：**
    *   语音输入/输出。
    *   图像识别与描述（如上传图片，AI生成描述或识别图中文字）。
    *   视频/音频转录与内容总结。
*   **离线模式与Edge AI：**
    *   支持部分功能离线使用，数据同步。
    *   集成小型AI模型，在客户端进行快速推理。
*   **集成更多外部服务：**
    *   与日历、任务管理、CRM等工具联动。
*   **更强大的知识图谱与语义网络。**
*   **个性化推荐与智能学习路径。**
